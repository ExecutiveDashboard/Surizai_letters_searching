<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Letter Search</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 20px; }
  h1 { text-align: center; }
  input[type="text"] { width: 300px; padding: 8px; margin: 5px; }
  button { padding: 8px 12px; }
  .letter { background: #fff; padding: 15px; margin-top: 15px; border-radius: 5px; box-shadow: 0 0 5px #ccc; white-space: pre-wrap; }
  .no-result { color: red; margin-top: 15px; }
</style>
</head>
<body>

<h1>Search Letter by Name or CNIC</h1>

<input type="text" id="searchInput" placeholder="Enter Name or CNIC">
<button onclick="searchLetter()">Search</button>

<div id="result"></div>

<script>
let lettersData = [];

// Load JSON file
fetch('letters_from_docx.json')
  .then(response => response.json())
  .then(data => {
    lettersData = data.letters; // Access the "letters" array
  })
  .catch(error => {
    document.getElementById('result').innerHTML = `<p class="no-result">Error loading JSON file: ${error}</p>`;
  });

function searchLetter() {
  const query = document.getElementById('searchInput').value.trim().toLowerCase();
  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = '';

  if (!query) {
    resultDiv.innerHTML = '<p class="no-result">Please enter a Name or CNIC.</p>';
    return;
  }

  // Search for matching letters
  const matched = lettersData.filter(letter => 
    (letter.name && letter.name.toLowerCase().includes(query)) ||
    (letter.cnic && letter.cnic.toLowerCase().includes(query))
  );

  if (matched.length === 0) {
    resultDiv.innerHTML = `<p class="no-result">No letter found for "${query}".</p>`;
    return;
  }

  // Display matched letters
  matched.forEach(letter => {
    const div = document.createElement('div');
    div.className = 'letter';
    div.innerHTML = `<strong>Letter ID:</strong> ${letter.id}<br>
                     <strong>Name:</strong> ${letter.name}<br>
                     <strong>CNIC:</strong> ${letter.cnic}<br><br>
                     ${letter.text}`;
    resultDiv.appendChild(div);
  });
}
</script>

</body>
</html>
